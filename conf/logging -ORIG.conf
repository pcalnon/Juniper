#!/usr/bin/env bash
#####################################################################################################################################################################################################
# Project:       Juniper
# Sub-Project:   JuniperCanopy
# Application:   juniper_canopy
# Purpose:       Monitoring and Diagnostic Frontend for Cascade Correlation Neural Network
#
# Author:        Paul Calnon
# Version:       1.0.0
# File Name:     logging.conf
# File Path:     <Project>/<Sub-Project>/<Application>/conf/
#
# Date:          2025-11-21
# Last Modified: 2025-12-19
#
# License:       MIT License
# Copyright:     Copyright (c) 2024,2025,2026 Paul Calnon
#
# Description:
#     This script is used to perform leveled logging for the JuniperCanopy util scripts.
#
#####################################################################################################################################################################################################
# Notes:
#     WARNING:  This config file is sourced by the config files for the api_request.bash and launch_close.bash scripts.
#
#     IMPORTANT NOTE:  Don't add check for re-sourcing this file; it breaks all the things.  Control is an illusion, man; just let it happen.  The dude abides.
#     IMPORTANT NOTE:  Colors are defined in the sourced config file: log_colors.conf
#
#     This script functions as a config file and is used to perform leveled logging for the Close scripts.
#     The supported logging levels are TRACE, VERBOSE, DEBUG, INFO, WARNING, ERROR, CRITICAL, and FATAL.
#
#     Logging Levels:
#         - The TRACE level is only logged if the log level variable is set to a value <= TRACE_LEVEL, returns 0
#         - The VERBOSE level is only logged if the log level variable is set to a value <= VERBOSE_LEVEL, returns 0
#         - The DEBUG level is only logged if the log level variable is set to a value <= DEBUG_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The INFO level is always logged if the log level variable is set to a value <= INFO_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The WARNING level is always logged if the log level variable is set to a value <= WARNING_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The ERROR level is always logged and the script if the log level variable is set to a value <= ERROR_NUM or if the DEBUG environment variable is set to TRUE, returns 1
#         - The CRITICAL level is always logged if the log level variable is set to a value <= CRITICAL_NUM or if the DEBUG environment variable is set to TRUE, exits with 1
#         - The FATAL level is always logged if the log level variable is set to a value <= FATAL_NUM or if the DEBUG environment variable is set to TRUE, exits with 1
#
#####################################################################################################################################################################################################
# References:
#
#####################################################################################################################################################################################################
# TODO :
#
#     TODO: need to finish refactor of logging.conf and logging_functions.conf
#
#
#####################################################################################################################################################################################################
# COMPLETED:
#
#####################################################################################################################################################################################################


#####################################################################################################################################################################################################
# Define General Logging Constants
#####################################################################################################################################################################################################
TRUE="0"
FALSE="1"

# DEBUG="${TRUE}"
DEBUG="${FALSE}"


#####################################################################################################################################################################################################
# Check if this config file has already been sourced.  Only Source this conf file Once
#####################################################################################################################################################################################################
if [[ "${JUNIPER_LOGGING_CONF_SOURCED}" != "${TRUE}" ]]; then
    export JUNIPER_LOGGING_CONF_SOURCED="${TRUE}"
    export TRUNCATED_LOGS="${FALSE}"
else
    log_warning "${LOGGING_NAME}.${CONF_EXT} already sourced.  Skipping re-source."
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( TRUE )) || return $(( TRUE ))
fi


#####################################################################################################################################################################################################
# Define Available Logging Levels
#     NOTE: These need to be exported so that util functions can set their own log levels
#####################################################################################################################################################################################################
export TRACE_LEVEL=0
export VERBOSE_LEVEL=1
export DEBUG_LEVEL=2
export INFO_LEVEL=3
export WARNING_LEVEL=4
export ERROR_LEVEL=5
export CRITICAL_LEVEL=6
export FATAL_LEVEL=7


export DEFAULT_LEVEL="${TRACE_LEVEL}"       # Set default log level to TRACE
# export DEFAULT_LEVEL="${VERBOSE_LEVEL}"   # Set default log level to VERBOSE
# export DEFAULT_LEVEL="${DEBUG_LEVEL}"     # Set default log level to DEBUG
# export DEFAULT_LEVEL="${INFO_LEVEL}"      # Set default log level to INFO
# export DEFAULT_LEVEL="${WARNING_LEVEL}"   # Set default log level to WARNING
# export DEFAULT_LEVEL="${ERROR_LEVEL}"     # Set default log level to ERROR
# export DEFAULT_LEVEL="${CRITICAL_LEVEL}"  # Set default log level to CRITICAL
# export DEFAULT_LEVEL="${FATAL_LEVEL}"     # Set default log level to FATAL


#####################################################################################################################################################################################################
#
#####################################################################################################################################################################################################
export TAB_SIZE="4"

# EXIT_ON_NO_LOG_COLORS="${FALSE}"
EXIT_ON_NO_LOG_COLORS="${TRUE}"

LOG_COLORS_FILE_PREFIX="log_colors"


#####################################################################################################################################################################################################
# Clear logs only if in Debug mode
#####################################################################################################################################################################################################
if [[ "${TRUNCATED_LOGS}" != "${TRUE}" ]]; then
    [[ "${DEBUG}" == "${TRUE}" ]] && cat /dev/null > "${LOG_FILE}"
    export TRUNCATED_LOGS="${TRUE}"
fi


#####################################################################################################################################################################################################
# Validate and source the logging functions config file
#####################################################################################################################################################################################################
LOG_FUNCTIONS_FILE_NAME="${LOG_FUNCTIONS_FILE_PREFIX}.${CONF_EXT}"
export LOG_FUNCTIONS_FILE="${CONF_DIR}/${LOG_FUNCTIONS_FILE_NAME}"

[[ ( ${LOG_FUNCTIONS_FILE} == "" ) || ( ! -f "${LOG_FUNCTIONS_FILE}" ) ]] && log_fatal "Logging Functions Conf file not found: ${LOG_FUNCTIONS_FILE}"
[[ "${DEBUG}" == "${TRUE}" ]] && { bash "${LOG_FUNCTIONS_FILE}"; SUCCESS="$?"; } || { source "${LOG_FUNCTIONS_FILE}"; SUCCESS="$?"; }
[[ "${SUCCESS}" != "${TRUE}" ]] && log_fatal "Failed to source Logging Functions file: \"${LOG_FUNCTIONS_FILE}\", (returned: ${SUCCESS})"
log_debug "Successfully Completed sourcing Logging Functions file: \"${LOG_FUNCTIONS_FILE}\", (returned \"${SUCCESS}\")"  # Standard Logging is available from this point


#####################################################################################################################################################################################################
# Define and Source Logging Colors Config file for sourcing
#####################################################################################################################################################################################################
LOG_COLORS_FILE_NAME="${LOG_COLORS_FILE_PREFIX}.${CONF_EXT}"
export LOG_COLORS_FILE="${CONF_DIR}/${LOG_COLORS_FILE_NAME}"

[[ ( "${LOG_COLORS_FILE}" == "" ) || ( ! -f "${LOG_COLORS_FILE}" ) ]] && { [[ "${EXIT_ON_NO_LOG_COLORS}" == "${TRUE}" ]] && log_fatal "Log Colors Conf file not found: ${LOG_COLORS_FILE}, (Exit on No Log Colors: ${TRUE})"; }
[[ "${DEBUG}" == "${TRUE}" ]] && { bash "${LOG_COLORS_FILE}"; SUCCESS="$?"; } || { source "${LOG_COLORS_FILE}"; SUCCESS="$?"; }
[[ ( "${SUCCESS}" != "${TRUE}" ) && ( "${EXIT_ON_NO_LOG_COLORS}" == "${TRUE}" ) ]] && log_fatal "Failed to source the Log Colors Conf file: ${LOG_COLORS_FILE}, (Exit on No Log Colors: ${TRUE})"
log_debug "Completed sourcing Log Colors Conf file: \"${LOG_COLORS_FILE}\", (returned \"${SUCCESS}\")"


#####################################################################################################################################################################################################
# Define constants for error logging termination settings
#####################################################################################################################################################################################################
# Set Default Return Value by Logging Level Function
export EXIT_TRACE="${TRUE}"
export EXIT_VERBOSE="${TRUE}"
export EXIT_DEBUG="${TRUE}"
export EXIT_INFO="${TRUE}"
export EXIT_WARNING="${TRUE}"
export EXIT_ERROR="${FALSE}"
export EXIT_CRITICAL="${FALSE}"
export EXIT_FATAL="${FALSE}"

# Flag to determine default error handling for error-related logging: set to True if an error should terminate this application process by default.
export TERM_TRACE="${FALSE}"
export TERM_VERBOSE="${FALSE}"
export TERM_DEBUG="${FALSE}"
export TERM_INFO="${FALSE}"
export TERM_WARNING="${FALSE}"
export TERM_ERROR="${FALSE}"
export TERM_CRITICAL="${TRUE}"
export TERM_FATAL="${TRUE}"


#####################################################################################################################################################################################################
# Define Constants for Logging Level Colors
#####################################################################################################################################################################################################
export COLOR_TRACE="${BLACK_BOLD_DARK}"
export COLOR_VERBOSE="${BLACK_BOLD}"
export COLOR_DEBUG="${BLUE_BRIGHT}"
export COLOR_INFO="${GREEN}"
export COLOR_WARNING="${YELLOW_BOLD}"
export COLOR_ERROR="${RED_BRIGHT}"
export COLOR_CRITICAL="${WHITE_ON_RED}"
export COLOR_FATAL="${WHITE_BOLD_BRIGHT_ON_RED}"

# Create log level colors array
declare -a LOG_COLORS=("${COLOR_TRACE}" "${COLOR_VERBOSE}" "${COLOR_DEBUG}" "${COLOR_INFO}" "${COLOR_WARNING}" "${COLOR_ERROR}" "${COLOR_CRITICAL}" "${COLOR_FATAL}")

# echo "Log Colors: ${LOG_COLORS[@]}"


#####################################################################################################################################################################################################
# Define Label and Number Constants for Logging Levels
#####################################################################################################################################################################################################
TRACE_NUM=1
VERBOSE_NUM=5
DEBUG_NUM=10
INFO_NUM=20
WARNING_NUM=30
ERROR_NUM=40
CRITICAL_NUM=50
FATAL_NUM=60

declare -a LOG_LABELS=("[TRACE]" "[VERBOSE]" "[DEBUG]" "[INFO]" "[WARNING]" "[ERROR]" "[CRITICAL]" "[FATAL]")
declare -a LOG_NUMBERS=("${TRACE_NUM}" "${VERBOSE_NUM}" "${DEBUG_NUM}" "${INFO_NUM}" "${WARNING_NUM}" "${ERROR_NUM}" "${CRITICAL_NUM}" "${FATAL_NUM}")

export LOG_LEVEL="${DEFAULT_LEVEL}"         # Set log level to the default level
export LOG_LEVEL_NUM="${LOG_NUMBERS[${LOG_LEVEL}]}"

log_verbose "Log Level Num: ${LOG_LEVEL_NUM}"


#####################################################################################################################################################################################################
# Setup Environment for logging line numbers and function names
#####################################################################################################################################################################################################
SCRIPT_NAME_ID="1"
LINE_NO_ID="0"
FUNC_NAME_ID="1"

log_verbose "Script Name ID: ${SCRIPT_NAME_ID}"


#####################################################################################################################################################################################################
# # Define Logging Helper functions
#####################################################################################################################################################################################################
function logger() {
    local LOG_PARENT="${1}"
    local LOG_LINE="${2}"
    local LOG_FUNC="${3}"
    local LOG_LABEL="${4}"
    local LOG_MESSAGE="${5}"
    local LOG_COLOR="${6}"
    printf "%b%-21s %-28s %-21s %-11s %s%b\n" ${LOG_COLOR} "($(date +%F_%T))" "${LOG_PARENT}:($LOG_LINE):" "${LOG_FUNC}:" "${LOG_LABEL}" "${LOG_MESSAGE}" ${RESET} | tee -a "${LOG_FILE}" 2>&1
    return $(( TRUE ))
}

function debug_flag_matters() {
    local LOG_LEVEL_NUM="${1}"
    [[ "${DEBUG}" == "${TRUE}" ]] && (( LOG_LEVEL_NUM >= DEBUG_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function display_level_matters() {
    local LOG_LEVEL_NUM="${1}"
    local DISPLAY_LEVEL_NUM="${2}"
    (( LOG_LEVEL_NUM <= DISPLAY_LEVEL_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function evaluate_log_level() {
    local DISPLAY_LEVEL_NUM="${1}"
    local LOG_LEVEL_NUM="${2}"
    ( debug_flag_matters "${LOG_LEVEL_NUM}" || display_level_matters "${LOG_LEVEL_NUM}" "${DISPLAY_LEVEL_NUM}" ) && return $(( TRUE )) || return $(( FALSE ))
}


#####################################################################################################################################################################################################
# Define custom level logging functions
#####################################################################################################################################################################################################
log_debug "Define level logging functions"

function global_log_trace() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_TRACE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_TRACE}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${TRACE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${TRACE_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_verbose() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_VERBOSE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_VERBOSE}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${VERBOSE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${VERBOSE_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_debug() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_DEBUG}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_DEBUG}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${DEBUG_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${DEBUG_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_info() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_INFO}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_INFO}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${INFO_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${INFO_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${INFO_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_warning() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_WARNING}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_WARNING}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${WARNING_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${WARNING_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${WARNING_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_error() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_ERROR}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_ERROR}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${ERROR_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${ERROR_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${ERROR_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_critical() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_CRITICAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_CRITICAL}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${CRITICAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${CRITICAL_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${CRITICAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_fatal() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_FATAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_FATAL}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${FATAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${FATAL_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${FATAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

log_trace "Completed Defining custom level logging functions"


#####################################################################################################################################################################################################
# Set the tab size for the logging functions
#####################################################################################################################################################################################################
export tabs="${TAB_SIZE}"


#####################################################################################################################################################################################################
# Export logging functions to calling script
#####################################################################################################################################################################################################
log_debug "Exporting logging functions to calling script"

export -f global_log_trace
export -f global_log_verbose
export -f global_log_debug
export -f global_log_info
export -f global_log_warning
export -f global_log_error
export -f global_log_critical
export -f global_log_fatal

log_trace "Completed Exporting logging functions to calling script"

if [[ "${DEBUG}" == "${TRUE}" ]]; then
    log_trace "Testing Logging Function Colors"

    global_log_trace     "Logging functions exported: I am Trace!"
    global_log_verbose   "Logging functions exported: I am Verbose!"
    global_log_debug     "Logging functions exported: I am Debug!"
    global_log_info      "Logging functions exported: I am Info!"
    global_log_warning   "Logging functions exported: I am Warning!"
    global_log_error     "Logging functions exported: I am Error!"    "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate
    global_log_critical  "Logging functions exported: I am Critical!" "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate
    global_log_fatal     "Logging functions exported: I am Fatal!"    "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate

    log_trace "Completed Testing Logging Function Colors"
fi

log_trace "Completed Logging Function Export Test"

log_verbose "Debug: ${DEBUG}"
log_verbose "True: ${TRUE}"
log_verbose "False: ${FALSE}"

[[ "${DEBUG}" == "${TRUE}" ]] && exit $(( TRUE )) || return $(( TRUE ))
